# 가상 환경

1. 정의 : Python  애플리케이션과 그에 따른 패키지들을 격리하여 관리할 수 있는 독립적인 실행 환경
2. 가상 환경을 사용하는 이유
    - 의존성 관리 : 라이브러리 및 패키지를 각 프로젝트마다 독립적으로 사용 가능
    - 팀 프로젝트 협업 : 모든 팀원이 동일한 환경과 의존성 위에서 작업하여 버전간 충돌을 방지
3. 가상 환경이 필요한 이유 (예시)
    - 다른 패키지 버전을 사용하기 위해
        - 한 개발자가 2개의 프로젝트(A와 B)를 진행해야 함
        - 프로젝트 A는 requests 패키지 버전 1을 사용해야 함
        - 프로젝트 B는 requests 패키지 버전 2를 사용해야 함
        - 하지만 파이썬 환경에서 패키지는 1개의 버전만 존재할 수 있음
    - 패키지 충돌을 피하기 위해
        - 한 개발자가 2개의 프로젝트(A와 B)를 진행해야 함
        - 프로젝트 A는 water라는 패키지를 사용해야 함
        - 프로젝트 B는 fire라는 패키지를 사용해야 함
        - 하지만 파이썬 환경에서 water와 fire 패키지를 함께 사용하면 충돌이 발생해서 설치 불가

## 가상 환경 설정 절차

1. 가상 환경 venv 생성
    
    ```bash
    python -m venv (가상환경 이름)
    ```
    
    - 임의의 이름으로 생성 가능하나 관례적으로 `venv` 이름을 사용
2. 가상 환경 활성화
    
    ```bash
    source venv/Scripts/activate
    ```
    
    - 활성화 명령어가 OS에 따라 다름 (MacOS / Linux : Scripts 대신 bin 사용
    - 주의 : 가상 환경 안에 들어가거나 나오는 개념이 아니라, 가상환경을 껐다 키는 개념
3. 환경에 설치된 패키지 목록 보기
    
    ```bash
    pip list
    ```
    
    - 참고 :
    1. 의존성 패키지
        - 한 소프트웨어 패키지가 다른 패키지의 기능이나 코드를 사용하기 때문에 그 패키지가 존재해야만 제대로 작동하는 관계
        - 사용하는 패키지가 설치되지 않았거나, 호환되는 버전이 아니면 오류가 발생하거나 예상치 못한 동작을 보일 수 있음
    2. 의존성 패키지 관리의 중요성
        - 개발 환경에서는 각각의 프로젝트가 사용하는 패키지와 그 버전을 정확히 관리하는 것이 중요
4. 설치된 패키지 목록 생성
    
    ```bash
    pip freeze > (파일 이름)
    ```
    
    - 현재 Python 환경에 설치된 모든 패키지와 그 버전을 텍스트 파일로 저장
    - 임의의 이름으로 사용 가능 하나 관례적으로 `requirements.txt` 사용
    - 패키지 목록이 필요한 이유 (예시)
        - 만약 2명(A와 B)의 개발자가 하나의 프로젝트를 함께 개발한다고 하자
        - 팀원 A가 먼저 가상 환경을 생성 후 프로젝트를 설정하고 관련된 패키지를 설치하고 개발하다가 협업을 위해 github에 프로젝트를 push
        - 팀원 B는 해당 프로젝트를 clone 받고 실행해보려 하지만 실행되지 않음
        - 팀원 A가 이 프로젝트를 위해 어떤 패키지를 설치했고, 어떤 버전을 설치했는지 A의 가상 환경 상황을 알 수 없음
    - 패키지 파일 자체를 공유하지 않는 이유 : 용량이 커서
        - .gitignore에 venv(환경)을 적어놓아줌
    - 패키지 목록 파일 특징 및 주의사항
        - 주요 특징
            - 가상환경의 패키지 목록을 쉽게 공유 가능
            - 프로젝트의 의존성을 명확히 문서화
            - 동일한 개발 환경을 다른 시스템에서 재현 가능
        - 사용 시 주의사항
            - 활성화된 가상환경에서 실행해야 정확한 패키지 목록 생성
            - 시스템 전역 패키지와 구분 필요
5. 패키지 목록 기반 설치
    
    ```bash
    pip install -r requirements.txt
    ```
    
    - 생성된 requirements.txt로 다른 환경에서 동일한 환경 구성하기
    - 가상환경 활성화 후 requirements.txt에 작성된 목록을 기반으로 설치
6. 가상 환경 비활성화
    
    ```bash
    deactivate
    ```
    

### 가상환경 주의사항 및 권장사항

1. 가상 환경에서 “들어가고 나오는”것이 아니라 사용할 Python 환경을 “On/Off”로 전환하는 개념
    - 가상환경 활성화는 현재 터미널 환경에만 영향을 끼침
    - 새 터미널 창을 열면 다시 활성화 해야 함
2. 가상환경은 “방”이 아니라 “도구세트”
    - 활성화는 특정 토구 세트를 선택하는 것
3. 프로젝트마다 별도의 가상환경 사용
4. 일반적으로 가상환경 폴더 venv는 관련된 프로젝트와 동일한 경로에 위치
5. 가상환경 폴더는 venv는 gitignore에 작성되어 원격 저장소에 공유되지 않음
    - 저장소 크기를 줄여 효율적인 협업과 배포를 가능하게 하기 위함 (requirements.txt를 공유)