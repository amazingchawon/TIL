# Prefix Sum (ëˆ„ì í•©)

> ë°°ì—´ì—ì„œ íŠ¹ì • êµ¬ê°„ì˜ í•©ì„ **ë¹ ë¥´ê²Œ ê³„ì‚°**í•˜ê¸° ìœ„í•´  
> **ì§€ê¸ˆê¹Œì§€ì˜ í•©ì„ ë¯¸ë¦¬ ê³„ì‚°í•´ ì €ì¥**í•´ë‘ëŠ” ê¸°ë²•ì…ë‹ˆë‹¤.

---

## ğŸ“Œ 1ì°¨ì› ëˆ„ì í•©

### í•µì‹¬ ì•„ì´ë””ì–´

- `prefix[i] = arr[0] + arr[1] + ... + arr[i]`
- êµ¬ê°„ í•©: `arr[l] + ... + arr[r] = prefix[r] - prefix[l - 1]`

### ì˜ˆì œ ì½”ë“œ

```python
arr = [1, 2, 3, 4]
prefix = [0] * len(arr)

prefix[0] = arr[0]
for i in range(1, len(arr)):
    prefix[i] = prefix[i - 1] + arr[i]

# ì˜ˆ: 1~3ë²ˆ ì¸ë±ìŠ¤ êµ¬ê°„í•© = prefix[3] - prefix[0] = 10 - 1 = 9
```

---

## ğŸ“Œ 2ì°¨ì› ëˆ„ì í•©

### ì¸ë±ìŠ¤ ê¸°ì¤€

- `arr[x][y]` â†’ `x`ëŠ” í–‰, `y`ëŠ” ì—´
- `S[x][y]`ëŠ” (0,0)ë¶€í„° (x,y)ê¹Œì§€ì˜ ì§ì‚¬ê°í˜• í•©

### ëˆ„ì í•© ê³µì‹

```python
S[x][y] = arr[x][y]
        + S[x-1][y]
        + S[x][y-1]
        - S[x-1][y-1]
```

> âš ï¸ ê²½ê³„ ì¡°ê±´ (x==0 ë˜ëŠ” y==0)ì¼ ë•ŒëŠ” ì¸ë±ìŠ¤ ì—ëŸ¬ ì£¼ì˜

---

### ì˜ˆì œ ì½”ë“œ

```python
N = 3
arr = [
    [1, 2, 3],  # x = 0
    [4, 5, 6],  # x = 1
    [7, 8, 9]   # x = 2
]

# ëˆ„ì í•© í…Œì´ë¸” (0-based)
S = [[0] * N for _ in range(N)]

for x in range(N):
    for y in range(N):
        S[x][y] = arr[x][y]  # í˜„ì¬ ìœ„ì¹˜ ê°’ë¶€í„° ì‹œì‘

        # ìœ„ìª½ì—ì„œ ë‚´ë ¤ì˜¨ ëˆ„ì í•© ì¶”ê°€
        if x > 0:
            S[x][y] += S[x-1][y]

        # ì™¼ìª½ì—ì„œ ëˆ„ì í•© ì¶”ê°€
        if y > 0:
            S[x][y] += S[x][y-1]

        # ìœ„ + ì™¼ìª½ì´ ê²¹ì¹˜ëŠ” ë¶€ë¶„ì„ ì¤‘ë³µ ì œê±°
        if x > 0 and y > 0:
            S[x][y] -= S[x-1][y-1]

```

---

### êµ¬ê°„í•© êµ¬í•˜ê¸°

> (x1, y1)ë¶€í„° (x2, y2)ê¹Œì§€ ì§ì‚¬ê°í˜• í•© êµ¬í•˜ê¸°

```python
def get_sum(x1, y1, x2, y2):
    res = S[x2][y2]
    if x1 > 0:
        res -= S[x1-1][y2]
    if y1 > 0:
        res -= S[x2][y1-1]
    if x1 > 0 and y1 > 0:
        res += S[x1-1][y1-1]
    return res
```
